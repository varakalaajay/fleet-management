"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[978],{705:function(e,t,n){var r=n(1413),a=n(890),i=n(533),s=(n(2791),n(184));t.Z=function(e){return(0,s.jsxs)(a.Z,(0,r.Z)((0,r.Z)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",(0,s.jsx)(i.Z,{color:"inherit",href:"https://infinite.com/",children:"Infinite"})," ",(new Date).getFullYear(),"."]}))}},978:function(e,t,n){n.r(t);var r=n(4165),a=n(5861),i=n(885),s=n(2791),o=n(8559),c=n.n(o),l=n(9961),u=n(5259),p=n(3407),d=n(4993),f=n(8234),h=(n(3666),n(1396),n(4554)),m=n(4663),x=n(266),g=n(1889),Z=n(5527),v=n(705),j=n(2388),y=n(8096),k=n(4925),w=n(8406),b=n(3786),S=n(6151),_=n(2062),C=n.n(_),I=n(184);delete c().Icon.Default.prototype._getIconUrl,c().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/images/marker-icon.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/images/marker-shadow.png"});t.default=function(){var e=(0,s.useState)({lat:37.350768,lng:-121.889488}),t=(0,i.Z)(e,2),n=t[0],o=t[1],c=(0,s.useState)([]),_=(0,i.Z)(c,2),D=(_[0],_[1]),z=(0,s.useRef)(),T=localStorage.getItem("token"),U=localStorage.getItem("user"),O=(0,s.useState)([]),F=(0,i.Z)(O,2),L=F[0],P=F[1],R=(0,s.useState)({}),W=(0,i.Z)(R,2),$=(W[0],W[1]),E=(0,s.useState)([17.45,78.38]),G=(0,i.Z)(E,2),J=(G[0],G[1]),M=(0,s.useState)(""),N=(0,i.Z)(M,2),V=N[0],Y=N[1],q=(0,s.useState)({}),A=(0,i.Z)(q,2),B=A[0],H=A[1],K=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.Z)({method:"post",url:"http://54.226.199.64:8001/infinite/get_devices",headers:{"Content-Type":"application/octet-stream","x-token":T,"x-user":U}});case 2:t=e.sent,P(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){K()}),[]);return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(h.Z,{component:"main",sx:{backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900]},flexGrow:1,height:"100vh",overflow:"auto"},children:[(0,I.jsx)(m.Z,{}),(0,I.jsxs)(x.Z,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,I.jsx)(g.ZP,{container:!0,spacing:3,children:(0,I.jsx)(g.ZP,{item:!0,xs:12,children:(0,I.jsxs)(Z.Z,{sx:{p:2,display:"flex",flexDirection:"column",height:"350"},children:[(0,I.jsxs)(h.Z,{component:"form",noValidate:!0,sx:{mt:1},children:[(0,I.jsxs)(y.Z,{sx:{m:1,minWidth:200},size:"small",children:[(0,I.jsx)(k.Z,{id:"demo-select-small",children:"Select Device"}),(0,I.jsx)(w.Z,{labelId:"demo-select-small",id:"demo-select-small",value:V,label:"Select Device",size:"small",onChange:function(e){Y(e.target.value);var t=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,j.Z)({method:"post",url:"http://54.226.199.64:8001/infinite/get_gps",headers:{"Content-Type":"application/octet-stream","x-token":T,"x-user":U},params:{device_id:e.target.value}});case 2:n=t.sent,o({lat:n.data.lat,lng:n.data.long}),J([n.data.lat,n.data.long]),$(n.data);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()},children:L.map((function(e){return(0,I.jsx)(b.Z,{value:e.device_id,children:e.device_id})}))})]}),(0,I.jsx)(S.Z,{variant:"contained",color:"success",sx:{mt:1},onClick:function(e){console.log(e.target.value);var t=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.Z.post("http://54.226.199.64:8001/infinite/set_geofence",B,{headers:{"Content-Type":"application/json","x-token":T,"x-user":U},params:{device_id:V,ref_id:3}});case 2:t=e.sent,C()({text:t.data,icon:"success",type:"success"}),Y(""),D([]);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t()},children:"Submit"})]}),(0,I.jsxs)(l.h,{style:{width:"100%",height:"70vh"},center:n,zoom:6,ref:z,children:[(0,I.jsx)(u.$,{children:(0,I.jsx)(d.$,{position:"topright",onCreated:function(e){var t=e.layerType,n=e.layer,r=n.getLatLngs()[0].reduce((function(e,t,n){return e["point".concat(n+1)]="(".concat(t.lat,", ").concat(t.lng,")"),e}),{});if(H(JSON.stringify(r)),"polygon"===t){n._leaflet_id;D(r)}},draw:{rectangle:!1,polyline:!1,circle:!1,circlemarker:!1,marker:!1}})}),(0,I.jsx)(p.I,{url:f.Z.maptiler.url,attribution:f.Z.maptiler.attribution})]})]})})}),(0,I.jsx)(v.Z,{sx:{pt:4}})]})]})})}},8234:function(e,t){t.Z={maptiler:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}}}}]);
//# sourceMappingURL=978.d96e64ac.chunk.js.map