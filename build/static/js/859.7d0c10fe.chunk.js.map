{"version":3,"file":"static/js/859.7d0c10fe.chunk.js","mappings":"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","sources":["Footer.js","GetGeofence.js","osm-providers.js"],"sourcesContent":["import { Link, Typography } from \"@mui/material\";\r\nimport React from \"react\";\r\n\r\nfunction Footer(props) {\r\n  return (\r\n    <Typography\r\n      variant=\"body2\"\r\n      color=\"text.secondary\"\r\n      align=\"center\"\r\n      {...props}\r\n    >\r\n      {\"Copyright Â© \"}\r\n      <Link color=\"inherit\" href=\"https://infinite.com/\">\r\n        Infinite\r\n      </Link>{\" \"}\r\n      {new Date().getFullYear()}\r\n      {\".\"}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React, { useEffect, useState } from \"react\";\r\n\r\nimport L from \"leaflet\";\r\nimport { MapContainer, TileLayer, FeatureGroup } from \"react-leaflet\";\r\nimport { EditControl } from \"react-leaflet-draw\";\r\nimport osm from \"./osm-providers\";\r\nimport { useRef } from \"react\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport \"leaflet-draw/dist/leaflet.draw.css\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Toolbar from \"@mui/material/Toolbar\";\r\nimport Container from \"@mui/material/Container\";\r\nimport Grid from \"@mui/material/Grid\";\r\nimport Paper from \"@mui/material/Paper\";\r\nimport Footer from \"./Footer\";\r\nimport axios from \"axios\";\r\nimport {\r\n  Button,\r\n  FormControl,\r\n  InputLabel,\r\n  MenuItem,\r\n  Select,\r\n} from \"@mui/material\";\r\n\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\n\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl:\r\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/images/marker-icon.png\",\r\n  iconUrl:\r\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/images/marker-icon.png\",\r\n  shadowUrl:\r\n    \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/images/marker-shadow.png\",\r\n});\r\n\r\nconst GetGeofence = () => {\r\n    const [center, setCenter] = useState({ lat: 37.350768, lng: -121.889488 });\r\n  const [mapLayers, setMapLayers] = useState([]);\r\n  const ZOOM_LEVEL = 6;\r\n  const mapRef = useRef();\r\n\r\n  const token = localStorage.getItem(\"token\");\r\n  const user = localStorage.getItem(\"user\");\r\n  const [devices, setDevices] = useState([]);\r\n  const [location, setLocation] = useState({});\r\n  const [position, setPosition] = useState([17.45, 78.38]);\r\n  const [dname, setDname] = useState(null);\r\n  const getDevices = async () => {\r\n    const res = await axios({\r\n      method: \"post\",\r\n      url: \"http://174.138.121.17:8001/infinite/get_devices\",\r\n      headers: {\r\n        \"Content-Type\": \"application/octet-stream\",\r\n        \"x-token\": token,\r\n        \"x-user\": user,\r\n      }\r\n    });\r\n    setDevices(res.data);\r\n  };\r\n  useEffect(() => {\r\n    getDevices();\r\n  }, []);\r\n\r\n  const handleChange = (event) => {\r\n    setDname(event.target.value);\r\n    const getDeviceLatLng = async () => {\r\n      const res = await axios({\r\n        method: \"post\",\r\n        url: \"http://174.138.121.17:8001/infinite/get_gps\",\r\n        headers: {\r\n          \"Content-Type\": \"application/octet-stream\",\r\n          \"x-token\": token,\r\n          \"x-user\": user,\r\n        },\r\n        params: { device_id: event.target.value },\r\n      });\r\n      setCenter({ lat: res.data.lat, lng: res.data.long });\r\n      setPosition([res.data.lat, res.data.long]);\r\n      setLocation(res.data);\r\n    };\r\n    getDeviceLatLng();\r\n  };\r\n\r\n  const _onCreate = (e) => {\r\n    console.log(e);\r\n\r\n    const { layerType, layer } = e;\r\n    console.log(layer);\r\n    if (layerType === \"polygon\") {\r\n      const { _leaflet_id } = layer;\r\n\r\n      setMapLayers((layers) => [\r\n        ...layers,\r\n        { id: _leaflet_id, latlngs: layer.getLatLngs()[0] },\r\n      ]);\r\n    }\r\n  };\r\n\r\n  const _onEdited = (e) => {\r\n    console.log(e);\r\n    const {\r\n      layers: { _layers },\r\n    } = e;\r\n\r\n    Object.values(_layers).map(({ _leaflet_id, editing }) => {\r\n      setMapLayers((layers) =>\r\n        layers.map((l) =>\r\n          l.id === _leaflet_id\r\n            ? { ...l, latlngs: { ...editing.latlngs[0] } }\r\n            : l\r\n        )\r\n      );\r\n    });\r\n  };\r\n\r\n  const _onDeleted = (e) => {\r\n    console.log(e);\r\n    const {\r\n      layers: { _layers },\r\n    } = e;\r\n\r\n    Object.values(_layers).map(({ _leaflet_id }) => {\r\n      setMapLayers((layers) => layers.filter((l) => l.id !== _leaflet_id));\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Box\r\n        component=\"main\"\r\n        sx={{\r\n          backgroundColor: (theme) =>\r\n            theme.palette.mode === \"light\"\r\n              ? theme.palette.grey[100]\r\n              : theme.palette.grey[900],\r\n          flexGrow: 1,\r\n          height: \"100vh\",\r\n          overflow: \"auto\",\r\n        }}\r\n      >\r\n        <Toolbar />\r\n        <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12}>\r\n              <Paper\r\n                sx={{\r\n                  p: 2,\r\n                  display: \"flex\",\r\n                  flexDirection: \"column\",\r\n                  height: \"350\",\r\n                }}\r\n              >\r\n                <Box component=\"form\" noValidate sx={{ mt: 1 }}>\r\n                  <FormControl sx={{ m: 1, minWidth: 200 }} size=\"small\">\r\n                    <InputLabel id=\"demo-select-small\">\r\n                      Select Device\r\n                    </InputLabel>\r\n                    <Select\r\n                      labelId=\"demo-select-small\"\r\n                      id=\"demo-select-small\"\r\n                      value={dname}\r\n                      label=\"Select Device\"\r\n                      size=\"small\"\r\n                      onChange={handleChange}\r\n                    >\r\n                      {devices.map((device) => {\r\n                        return (\r\n                          <MenuItem value={device.device_id}>\r\n                            {device.device_id}\r\n                          </MenuItem>\r\n                        );\r\n                      })}\r\n                    </Select>\r\n                  </FormControl>\r\n                  <Button variant=\"contained\" color=\"success\" sx={{ mt: 1 }}>\r\n                    Submit\r\n                  </Button>\r\n                </Box>\r\n                {dname === null ? null : (<MapContainer\r\n                  style={{ width: \"100%\", height: \"70vh\" }}\r\n                  center={center}\r\n                  zoom={ZOOM_LEVEL}\r\n                  ref={mapRef}\r\n                >\r\n                  <FeatureGroup>\r\n                    <EditControl\r\n                      position=\"topright\"\r\n                      onCreated={_onCreate}\r\n                      onEdited={_onEdited}\r\n                      onDeleted={_onDeleted}\r\n                      draw={{\r\n                        rectangle: false,\r\n                        polyline: false,\r\n                        circle: false,\r\n                        circlemarker: false,\r\n                        marker: false,\r\n                      }}\r\n                    />\r\n                  </FeatureGroup>\r\n                  <TileLayer\r\n                    url={osm.maptiler.url}\r\n                    attribution={osm.maptiler.attribution}\r\n                  />\r\n                </MapContainer>)\r\n                \r\n                }\r\n                \r\n              </Paper>\r\n            </Grid>\r\n          </Grid>\r\n          <Footer sx={{ pt: 4 }} />\r\n        </Container>\r\n      </Box>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default GetGeofence","export default {\r\n  maptiler: {\r\n    url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\r\n    attribution:\r\n      '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\r\n  },\r\n};\r\n"],"names":["props","variant","color","align","href","Date","getFullYear","L","iconRetinaUrl","iconUrl","shadowUrl","useState","lat","lng","center","setCenter","setMapLayers","mapRef","useRef","token","localStorage","getItem","user","devices","setDevices","setLocation","setPosition","dname","setDname","getDevices","axios","method","url","headers","res","data","useEffect","component","sx","backgroundColor","theme","palette","mode","grey","flexGrow","height","overflow","maxWidth","mt","mb","container","spacing","item","xs","p","display","flexDirection","noValidate","m","minWidth","size","id","labelId","value","label","onChange","event","target","getDeviceLatLng","params","device_id","long","map","device","style","width","zoom","ref","position","onCreated","e","console","log","layerType","layer","_leaflet_id","layers","latlngs","getLatLngs","onEdited","_layers","Object","values","editing","l","onDeleted","filter","draw","rectangle","polyline","circle","circlemarker","marker","osm","attribution","pt","maptiler"],"sourceRoot":""}