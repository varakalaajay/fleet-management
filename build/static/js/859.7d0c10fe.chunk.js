"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[859],{705:function(e,t,n){var r=n(1413),a=n(890),l=n(533),i=(n(2791),n(184));t.Z=function(e){return(0,i.jsxs)(a.Z,(0,r.Z)((0,r.Z)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",(0,i.jsx)(l.Z,{color:"inherit",href:"https://infinite.com/",children:"Infinite"})," ",(new Date).getFullYear(),"."]}))}},3859:function(e,t,n){n.r(t);var r=n(1413),a=n(2982),l=n(4165),i=n(5861),o=n(885),s=n(2791),c=n(8559),u=n.n(c),d=n(9961),p=n(5259),f=n(7626),h=n(4993),m=n(8234),g=(n(3666),n(1396),n(4554)),x=n(4663),Z=n(266),v=n(1889),j=n(5527),y=n(705),b=n(2388),w=n(8096),k=n(4925),_=n(8406),S=n(3786),C=n(6151),I=n(184);delete u().Icon.Default.prototype._getIconUrl,u().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/images/marker-icon.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/images/marker-shadow.png"});t.default=function(){var e=(0,s.useState)({lat:37.350768,lng:-121.889488}),t=(0,o.Z)(e,2),n=t[0],c=t[1],u=(0,s.useState)([]),D=(0,o.Z)(u,2),z=(D[0],D[1]),O=(0,s.useRef)(),U=localStorage.getItem("token"),T=localStorage.getItem("user"),E=(0,s.useState)([]),F=(0,o.Z)(E,2),L=F[0],P=F[1],R=(0,s.useState)({}),W=(0,o.Z)(R,2),$=(W[0],W[1]),G=(0,s.useState)([17.45,78.38]),M=(0,o.Z)(G,2),V=(M[0],M[1]),Y=(0,s.useState)(null),q=(0,o.Z)(Y,2),A=q[0],B=q[1],H=function(){var e=(0,i.Z)((0,l.Z)().mark((function e(){var t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,b.Z)({method:"post",url:"http://174.138.121.17:8001/infinite/get_devices",headers:{"Content-Type":"application/octet-stream","x-token":U,"x-user":T}});case 2:t=e.sent,P(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){H()}),[]);return(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(g.Z,{component:"main",sx:{backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900]},flexGrow:1,height:"100vh",overflow:"auto"},children:[(0,I.jsx)(x.Z,{}),(0,I.jsxs)(Z.Z,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,I.jsx)(v.ZP,{container:!0,spacing:3,children:(0,I.jsx)(v.ZP,{item:!0,xs:12,children:(0,I.jsxs)(j.Z,{sx:{p:2,display:"flex",flexDirection:"column",height:"350"},children:[(0,I.jsxs)(g.Z,{component:"form",noValidate:!0,sx:{mt:1},children:[(0,I.jsxs)(w.Z,{sx:{m:1,minWidth:200},size:"small",children:[(0,I.jsx)(k.Z,{id:"demo-select-small",children:"Select Device"}),(0,I.jsx)(_.Z,{labelId:"demo-select-small",id:"demo-select-small",value:A,label:"Select Device",size:"small",onChange:function(e){B(e.target.value);var t=function(){var t=(0,i.Z)((0,l.Z)().mark((function t(){var n;return(0,l.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,b.Z)({method:"post",url:"http://174.138.121.17:8001/infinite/get_gps",headers:{"Content-Type":"application/octet-stream","x-token":U,"x-user":T},params:{device_id:e.target.value}});case 2:n=t.sent,c({lat:n.data.lat,lng:n.data.long}),V([n.data.lat,n.data.long]),$(n.data);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()},children:L.map((function(e){return(0,I.jsx)(S.Z,{value:e.device_id,children:e.device_id})}))})]}),(0,I.jsx)(C.Z,{variant:"contained",color:"success",sx:{mt:1},children:"Submit"})]}),null===A?null:(0,I.jsxs)(d.h,{style:{width:"100%",height:"70vh"},center:n,zoom:6,ref:O,children:[(0,I.jsx)(p.$,{children:(0,I.jsx)(h.$,{position:"topright",onCreated:function(e){console.log(e);var t=e.layerType,n=e.layer;if(console.log(n),"polygon"===t){var r=n._leaflet_id;z((function(e){return[].concat((0,a.Z)(e),[{id:r,latlngs:n.getLatLngs()[0]}])}))}},onEdited:function(e){console.log(e);var t=e.layers._layers;Object.values(t).map((function(e){var t=e._leaflet_id,n=e.editing;z((function(e){return e.map((function(e){return e.id===t?(0,r.Z)((0,r.Z)({},e),{},{latlngs:(0,r.Z)({},n.latlngs[0])}):e}))}))}))},onDeleted:function(e){console.log(e);var t=e.layers._layers;Object.values(t).map((function(e){var t=e._leaflet_id;z((function(e){return e.filter((function(e){return e.id!==t}))}))}))},draw:{rectangle:!1,polyline:!1,circle:!1,circlemarker:!1,marker:!1}})}),(0,I.jsx)(f.I,{url:m.Z.maptiler.url,attribution:m.Z.maptiler.attribution})]})]})})}),(0,I.jsx)(y.Z,{sx:{pt:4}})]})]})})}},8234:function(e,t){t.Z={maptiler:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}}}}]);
//# sourceMappingURL=859.7d0c10fe.chunk.js.map