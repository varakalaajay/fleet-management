"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[449],{6091:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});n(2791);var r=n(4554),a=n(4663),o=n(266),c=n(1889),s=n(705),i=n.p+"static/media/dashboard.2e886257e4ebbfac1e95.png",l=(n(3666),n(2077),n(8234),n(8559)),u=n.n(l),p=n(184);new(u().Icon)({iconUrl:n(9229),iconSize:[40,40],iconAnchor:[17,46],popupAnchor:[0,-46]}),new(u().Icon)({iconUrl:n(9229),iconSize:[40,40],iconAnchor:[17,46],popupAnchor:[0,-46]});n(4134);var d=function(){return(0,p.jsxs)(r.Z,{component:"main",sx:{backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900]},flexGrow:1,height:"100vh",overflow:"auto"},children:[(0,p.jsx)(a.Z,{}),(0,p.jsxs)(o.Z,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,p.jsx)(c.ZP,{container:!0,spacing:3,sx:{backgroundImage:"url(".concat(i,")"),backgroundRepeat:"no-repeat",height:"80vh"}}),(0,p.jsx)(s.Z,{sx:{pt:4}})]})]})}},4134:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r=n(4165),a=n(5861),o=n(885),c=n(2791),s=n(9961),i=n(3407),l=n(3209),u=(n(3666),n(2077),n(4554)),p=n(4663),d=n(1889),h=n(5527),f=n(8096),m=n(4925),x=n(8406),g=n(3786),v=n(2388),Z=(n(2062),n(6598)),j=n(5985),b=(n(5462),n(184));function w(){var e=(0,c.useState)({lat:40.2974883,lng:-82.2067383}),t=(0,o.Z)(e,2),n=t[0],w=t[1],k=(0,c.useState)(null),y=(0,o.Z)(k,2),S=(y[0],y[1]),I=localStorage.getItem("token"),C=localStorage.getItem("user"),D=(0,c.useState)([]),_=(0,o.Z)(D,2),z=_[0],A=_[1],P=(0,c.useState)(""),T=(0,o.Z)(P,2),G=T[0],L=T[1],U=(0,c.useState)(null),W=(0,o.Z)(U,2),E=W[0],F=W[1],M=(0,c.useState)(null),O=(0,o.Z)(M,2),R=O[0],q=O[1],B=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.Z)({method:"post",url:"http://54.226.199.64:8001/infinite/get_devices",headers:{"Content-Type":"application/octet-stream","x-token":I,"x-user":C}});case 2:t=e.sent,A(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){B();var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.Z)({method:"post",url:"http://54.226.199.64:8001/infinite/get_gps",headers:{"Content-Type":"application/octet-stream","x-token":I,"x-user":C},params:{device_id:G,count:1}});case 2:t=e.sent,w({lat:t.data[0].lat,lng:t.data[0].long}),n=Date.parse(t.data[0].ts),console.log(n,"time stamp1"),F(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.Z)({method:"post",url:"http://54.226.199.64:8001/infinite/get_geofence_breach",headers:{"Content-Type":"application/octet-stream","x-token":I,"x-user":C},params:{device_id:G,count:1}});case 2:t=e.sent,n=Date.parse(t.data[0].ts),console.log(n,"time stamp2"),q(n),S(t.data[0]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=setInterval((function(){if(e(),t(),E===R){var n=new Date(R).toLocaleString();(0,j.Am)("".concat(G," crossed the geofence at ").concat(n))}}),5e3);return console.log(E,R),function(){clearInterval(n)}}),[G,R]);return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(u.Z,{component:"main",sx:{backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900]},flexGrow:1,height:"100vh",overflow:"auto"},children:[" ",(0,b.jsx)(j.Ix,{}),(0,b.jsx)(p.Z,{}),(0,b.jsx)(Z.Z,{maxWidth:"lg",sx:{mt:4,mb:4},children:(0,b.jsx)(d.ZP,{container:!0,spacing:3,children:(0,b.jsx)(d.ZP,{item:!0,xs:12,children:(0,b.jsxs)(h.Z,{sx:{p:2,display:"flex",flexDirection:"column",height:"350"},children:[(0,b.jsxs)(f.Z,{sx:{m:1,width:200},size:"small",children:[(0,b.jsx)(m.Z,{id:"demo-select-small",children:"Select Device"}),(0,b.jsx)(x.Z,{labelId:"demo-select-small",id:"demo-select-small",value:G,label:"Select Device",size:"small",onChange:function(e){e.preventDefault(),L(e.target.value),(0,j.Am)("".concat(e.target.value," Location Changed"))},children:z.map((function(e){var t=e.device_id;e.status;return(0,b.jsx)(g.Z,{value:t,children:t},t)}))})]}),(0,b.jsxs)(s.h,{style:{height:"calc(100vh - 52px)"},center:[40.2974883,-82.2067383],zoom:17,minZoom:5,children:[(0,b.jsx)(i.I,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,b.jsx)(l.Z,{data:null!==n&&void 0!==n?n:{}})]})]})})})})]})})}}}]);
//# sourceMappingURL=449.bfde1787.chunk.js.map