"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[978],{705:function(e,t,n){var r=n(1413),a=n(890),i=n(533),o=(n(2791),n(184));t.Z=function(e){return(0,o.jsxs)(a.Z,(0,r.Z)((0,r.Z)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",(0,o.jsx)(i.Z,{color:"inherit",href:"https://infinite.com/",children:"Infinite"})," ",(new Date).getFullYear(),"."]}))}},978:function(e,t,n){n.r(t);var r=n(1413),a=n(4165),i=n(5861),o=n(885),s=n(2791),c=n(8559),l=n.n(c),u=n(9961),d=n(5259),p=n(7626),f=n(4993),h=n(8234),m=(n(3666),n(1396),n(4554)),g=n(4663),x=n(266),Z=n(1889),v=n(5527),j=n(705),y=n(2388),k=n(8096),w=n(4925),b=n(8406),_=n(3786),S=n(6151),C=n(2062),I=n.n(C),D=n(184);delete l().Icon.Default.prototype._getIconUrl,l().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/images/marker-icon.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/images/marker-shadow.png"});t.default=function(){var e=(0,s.useState)({lat:37.350768,lng:-121.889488}),t=(0,o.Z)(e,2),n=t[0],c=t[1],l=(0,s.useState)([]),C=(0,o.Z)(l,2),O=(C[0],C[1]),z=(0,s.useRef)(),T=localStorage.getItem("token"),U=localStorage.getItem("user"),E=(0,s.useState)([]),F=(0,o.Z)(E,2),L=F[0],P=F[1],R=(0,s.useState)({}),W=(0,o.Z)(R,2),$=(W[0],W[1]),G=(0,s.useState)([17.45,78.38]),J=(0,o.Z)(G,2),M=(J[0],J[1]),N=(0,s.useState)(""),V=(0,o.Z)(N,2),Y=V[0],q=V[1],A=(0,s.useState)({}),B=(0,o.Z)(A,2),H=B[0],K=B[1],Q=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.Z)({method:"post",url:"http://174.138.121.17:8001/infinite/get_devices",headers:{"Content-Type":"application/octet-stream","x-token":T,"x-user":U}});case 2:t=e.sent,P(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){Q()}),[]);return(0,D.jsx)(D.Fragment,{children:(0,D.jsxs)(m.Z,{component:"main",sx:{backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900]},flexGrow:1,height:"100vh",overflow:"auto"},children:[(0,D.jsx)(g.Z,{}),(0,D.jsxs)(x.Z,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,D.jsx)(Z.ZP,{container:!0,spacing:3,children:(0,D.jsx)(Z.ZP,{item:!0,xs:12,children:(0,D.jsxs)(v.Z,{sx:{p:2,display:"flex",flexDirection:"column",height:"350"},children:[(0,D.jsxs)(m.Z,{component:"form",noValidate:!0,sx:{mt:1},children:[(0,D.jsxs)(k.Z,{sx:{m:1,minWidth:200},size:"small",children:[(0,D.jsx)(w.Z,{id:"demo-select-small",children:"Select Device"}),(0,D.jsx)(b.Z,{labelId:"demo-select-small",id:"demo-select-small",value:Y,label:"Select Device",size:"small",onChange:function(e){q(e.target.value);var t=function(){var t=(0,i.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,y.Z)({method:"post",url:"http://174.138.121.17:8001/infinite/get_gps",headers:{"Content-Type":"application/octet-stream","x-token":T,"x-user":U},params:{device_id:e.target.value}});case 2:n=t.sent,c({lat:n.data.lat,lng:n.data.long}),M([n.data.lat,n.data.long]),$(n.data);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()},children:L.map((function(e){return(0,D.jsx)(_.Z,{value:e.device_id,children:e.device_id})}))})]}),(0,D.jsx)(S.Z,{variant:"contained",color:"success",sx:{mt:1},onClick:function(e){var t=function(){var t=(0,i.Z)((0,a.Z)().mark((function t(){var n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.Z.post("http://174.138.121.17:8001/infinite/set_geofence",H,{headers:{"Content-Type":"application/json","x-token":T,"x-user":U},params:{device_id:e.target.value,ref_id:3}});case 2:n=t.sent,I()({text:n.data,icon:"success",type:"success"}),q(""),O([]);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()},children:"Submit"})]}),(0,D.jsxs)(u.h,{style:{width:"100%",height:"70vh"},center:n,zoom:6,ref:z,children:[(0,D.jsx)(d.$,{children:(0,D.jsx)(f.$,{position:"topright",onCreated:function(e){var t=e.layerType,n=e.layer,r=n.getLatLngs()[0].reduce((function(e,t,n){return e["point".concat(n+1)]="(".concat(t.lat,", ").concat(t.lng,")"),e}),{});if(K(JSON.stringify(r)),"polygon"===t){n._leaflet_id;O(r)}},onEdited:function(e){console.log(e);var t=e.layers._layers;Object.values(t).map((function(e){var t=e._leaflet_id,n=e.editing;O((function(e){return e.map((function(e){return e.id===t?(0,r.Z)((0,r.Z)({},e),{},{latlngs:(0,r.Z)({},n.latlngs[0])}):e}))}))}))},onDeleted:function(e){console.log(e);var t=e.layers._layers;Object.values(t).map((function(e){var t=e._leaflet_id;O((function(e){return e.filter((function(e){return e.id!==t}))}))}))},draw:{rectangle:!1,polyline:!1,circle:!1,circlemarker:!1,marker:!1}})}),(0,D.jsx)(p.I,{url:h.Z.maptiler.url,attribution:h.Z.maptiler.attribution})]})]})})}),(0,D.jsx)(j.Z,{sx:{pt:4}})]})]})})}},8234:function(e,t){t.Z={maptiler:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}}}}]);
//# sourceMappingURL=978.8e852637.chunk.js.map